spring:
  application:
    name: loci
  boot:
    admin:
      client:
        url: http://localhost:7070
        username: 'admin'
        password: 'adminadmin'

  security:
    websocket:
      same-origin-disabled: true
  flyway:
    enabled: true
    locations: classpath:db/migrations
    baseline-on-migrate: true
    url: jdbc:postgresql://localhost:5432/locidb
    user: admin
    schemas: public
    password: admin

    # Deadzone!
    # clean-disabled: false
    # clean-on-validation-error: true

  datasource:
    url: jdbc:postgresql://localhost:5432/locidb
    username: admin
    password: admin
    hikari:
      poolName: Hikari
      # Require to specify commit use like @Transactional
      # auto-commit: false
    type: com.zaxxer.hikari.HikariDataSource
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: true
    properties:
      hibernate:
        format_sql: true

    # NOTE: Use for init database schema
    # hibernate:
    #   ddl-auto: create
    # properties:
      # javax:
      #   persistence:
      #     schema-generation:
      #       scripts:
      #         action: create
      #         create-target: src/main/resources/schema.sql



    # NOTE: update schema helper
    # properties:
      javax: # use jakartar
        persistence:
          schema-generation:
            create-source: metadata
            scripts:
              action: update
              create-target: src/main/resources/update.sql


  devtools:
    restart:
      enabled: true
    livereload:
      enabled: true


  # Define message queue connection
  rabbitmq:
    host: localhost
    port: 5672
    usename: admin
    password: admin
    virtual-host: /

    stomp:
      enabled: true
      host: localhost
      port: 61613
  websocket:
    max-text-message-size: 8192
    max-binary-message-size: 8192

stomp.replay:
  relay-host: localhost
  relay-port: 61613
  client-login: guest
  client-passcode: guest
  system-login: guest
  system-passcode: guest
  system-heartbeat-send-interval: 5000
  system-heartbeat-receive-interval: 4000

application:
  client-base-url: http://localhost:4200
  cors:
    allowed-origins: http://localhost:4200
    allowed-methods: "*"
    # allowed-mappings: "/**"
    allowed-headers: "*"
    exposed-headers: "*"
    allow-credentials: true
    max-age: 300

management:
  endpoints:
    jmx:
      exposure:
        include: health,info

    web:
      exposure:
        # Access /actuator/metrics or /actuator/prometheus
        include: "*"
        # include: health,info,metrics,prometheus,httpexchanges

        exclude: env,beans
  endpoint:
    health:
      show-details: always
  metrics:
    export:
      prometheus:
        enabled: true
    tags:
      application: loci-app  # tag for app-server metrics


flyway:
  enabled: true
  url: jdbc:postgresql://localhost:5432/locidb
  user: admin
  # schemas: public
  password: admin
  locations: src/main/resources/db/migrations


shell:
  interactive:
    enabled: false

logging:
  com.loci.loci_backend: DEBUG

  level:
    org.springframework.security.web.FilterChainProxy: DEBUG
  #   root: DEBUG
  #   com.loci.loci_backend.common.aspect.LoggingAspect: INFO
  #   org:
  #     hibernate:
  #       SQL: INFO
  #     type:
  #       descriptor:
  #         sql:
  #           BasicBinder: INFO
  #     springframework:
  #       messaging: INFO
  #       web:
  #         authentication: INFO
  #         FilterChainProxy: INFO
  #         socket: INFO
  #         filter:
  #           CommonsRequestLoggingFilter: INFO
  #       security:
  #         authentication: INFO
  #         oauth2: INFO
keycloak:
  auth-server-url: http://localhost:8080
  # realm: your-target-realm          # Realm where users will be migrated
  resource: spring
  public-client: false
  migration-password: exampleloci123
  credentials: # admin credentials
    username: admin
    password: admin


upload:
  minio:
    url: http://localhost:9000
    access-key: minioadmin
    secret-key: minioadmin
    secure: false
    bucket: loci-bucket-01
    metric-name: ""
    url-prefix: "http://127.0.0.1:9000" # use to point to
    region: us-east-1


# logging:
#   structured:
#     json:
#       enabled: true
#       format: logstash  # Or 'ecs' for Elastic Common Schema
#       stacktrace:
#         root: first
#         max-length: 1024
#         include-common-frames: true
#         include-hashes: true
