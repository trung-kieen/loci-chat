spring:
  application:
    name: loci

  security:
    websocket:
      same-origin-disabled: true
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true

  datasource:
    url: jdbc:postgresql://localhost:5432/locidb
    username: admin
    password: admin
    hikari:
      poolName: Hikari
      # Require to specify commit use like @Transactional
      # auto-commit: false
    type: com.zaxxer.hikari.HikariDataSource
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: true
    properties:
      hibernate:
        format_sql: true




  devtools:
    restart:
      enabled: true
    livereload:
      enabled: true



application:
  client-base-url: http://localhost:4200
  cors:
    allowed-origins: http://localhost:4200
    allowed-methods: "*"
    # allowed-mappings: "/**"
    allowed-headers: "*"
    exposed-headers: "*"
    allow-credentials: true
    max-age: 300

management:
  endpoints:
    jmx:
      exposure:
        include: health,info

    web:
      exposure:
        # Access /actuator/metrics or /actuator/prometheus
        # include: "*"
        include: health,info,metrics,prometheus,httpexchanges

        exclude: env,beans
  metrics:
    export:
      prometheus:
        enabled: true
    tags:
      application: loci-app  # tag for app-server metrics


flyway:
  url: jdbc:mysql://localhost:5432/locidb
  user: admin
  password: admin


shell:
  interactive:
    enabled: true

logging:
  com.loci.loci_backend: TRACE
  level:
    root: INFO
    org:
      hibernate:
        SQL: INFO  # DEBUG
      type:
        descriptor:
          sql:
            BasicBinder: INFO # DEBUG
      springframework:
        messaging: INFO  # DEBUG

        web:
          authentication: TRACE
          FilterChainProxy: TRACE
          socket: TRACE
          filter:
            CommonsRequestLoggingFilter: DEBUG
        security:
          authentication: TRACE
          oauth2: TRACE
keycloak:
  auth-server-url: http://localhost:8080
  # realm: your-target-realm          # Realm where users will be migrated
  resource: spring
  public-client: false
  migration-password: exampleloci123
  credentials: # admin credentials
    username: admin
    password: admin
# logging:
#   structured:
#     json:
#       enabled: true
#       format: logstash  # Or 'ecs' for Elastic Common Schema
#       stacktrace:
#         root: first
#         max-length: 1024
#         include-common-frames: true
#         include-hashes: true
